if("undefined"==typeof jQuery)throw new Error("jQuery is not loaded");$.fn.zabuto_calendar=function(a){var e=$.extend({},$.fn.zabuto_calendar_defaults(),a),t=$.fn.zabuto_calendar_language(e.language);return e=$.extend({},e,t),this.each(function(){var a=$(this);function t(a,e,r,u){var c=new Date(r,u,1,0,0,0,0);return a.data("currDate",c),e.empty(),e=function(a,e,n,r){var o=a.data("navIcons"),l=$('<i class="fas fa-chevron-left"></i>'),s=$('<i class="fas fa-chevron-right"></i>');"object"==typeof o&&("prev"in o&&l.html(o.prev),"next"in o&&s.html(o.next));var d=a.data("showPrevious");"number"!=typeof d&&!1!==d||(d=i(a.data("showPrevious"),!0));var u=$('<div class="calendar-month-navigation"></div>');if(u.attr("id",a.attr("id")+"_nav-prev"),u.data("navigation","prev"),!1!==d){var c=r-1,b=n;-1==c&&(b-=1,c=11),u.data("to",{year:b,month:c+1}),u.append(l),"function"==typeof a.data("actionNavFunction")&&u.click(a.data("actionNavFunction")),u.click(function(n){t(a,e,b,c)})}var v=a.data("showNext");"number"!=typeof v&&!1!==v||(v=i(a.data("showNext"),!1));var p=$('<div class="calendar-month-navigation"></div>');if(p.attr("id",a.attr("id")+"_nav-next"),p.data("navigation","next"),!1!==v){var m=r+1,h=n;12==m&&(h+=1,m=0),p.data("to",{year:h,month:m+1}),p.append(s),"function"==typeof a.data("actionNavFunction")&&p.click(a.data("actionNavFunction")),p.click(function(n){t(a,e,h,m)})}var _=a.data("monthLabels"),f=$("<td></td>").append(u),g=$("<td></td>").append(p),w=$("<span>"+_[r]+" "+n+"</span>");w.dblclick(function(){var n=a.data("initDate");t(a,e,n.getFullYear(),n.getMonth())});var y=$('<td colspan="5"></td>');y.append(w);var M=$('<tr class="calendar-month-header"></tr>');return M.append(f,y,g),e.append(M),e}(a,e,r,u),e=function(a,e){if(!0===a.data("showDays")){var t=a.data("weekStartsOn"),n=a.data("dowLabels");if(0===t){var r=$.extend([],n),o=new Array(r.pop());n=o.concat(r)}var l=$('<tr class="calendar-dow-header"></tr>');$(n).each(function(a,e){l.append("<th>"+e+"</th>")}),e.append(l)}return e}(a,e),e=function(a,e,t,n){a.data("ajaxSettings");var r=function(a,e){var t=d(a,e),n=s(a,e,1),r=s(a,e,t),o=t,l=n-r;l>0&&(o+=l);return Math.ceil(o/7)}(t,n),i=d(t,n),u=s(t,n,1),c=s(t,n,i),b=1;0===a.data("weekStartsOn")&&(6==c&&r++,6!=u||0!=c&&1!=c&&5!=c||r--,7==++u&&(u=0));for(var v=0;v<r;v++){for(var p=$('<tr class="calendar-dow"></tr>'),m=0;m<7;m++){if(m<u||b>i)p.append("<td></td>");else{var h=a.attr("id")+"_"+l(t,n,b),_=h+"_day",f=$('<div id="'+_+'" class="day" >'+b+"</div>");f.data("day",b),o(t,n,b)&&(f.addClass("today"),!0===a.data("showToday")&&f.html('<span class="badge badge-today">'+b+"</span>"));var g=$('<td id="'+h+'"></td>');g.append(f),g.data("date",l(t,n,b)),g.data("hasEvent",!1),"function"==typeof a.data("actionFunction")&&(g.addClass("dow-clickable"),g.click(function(){a.data("selectedDate",$(this).data("date"))}),g.click(a.data("actionFunction"))),p.append(g),b++}6==m&&(u=0)}e.append(p)}return e}(a,e,r,u),n(a,r,u),e}function n(a,e,t){var n=a.data("jsonData"),o=a.data("ajaxSettings");return a.data("events",!1),!1!==n?function(a){var e=a.data("jsonData");return a.data("events",e),r(a,"json"),!0}(a):!1===o||function(a,e,t){var n=a.data("ajaxSettings");if("object"!=typeof n||void 0===n.url)return alert("Invalid calendar event settings"),!1;var o={year:e,month:t+1};return $.ajax({type:"GET",url:n.url,data:o,dataType:"json"}).done(function(e){var t=[];$.each(e,function(a,n){t.push(e[a])}),a.data("events",t),r(a,"ajax")}),!0}(a,e,t)}function r(a,e){a.data("jsonData");var t=a.data("ajaxSettings"),n=a.data("events");!1!==n&&$(n).each(function(n,r){var o=a.attr("id")+"_"+r.date,l=$("#"+o),s=$("#"+o+"_day");if(l.data("hasEvent",!0),void 0!==r.title&&l.attr("title",r.title),void 0===r.classname?l.addClass("event"):(l.addClass("event-styled"),s.addClass(r.classname)),void 0!==r.badge&&!1!==r.badge){var d=!0===r.badge?"":" badge-"+r.badge,i=s.data("day");s.html('<span class="badge badge-event'+d+'">'+i+"</span>")}if(void 0!==r.body){var u=!1;if("json"===e&&void 0!==r.modal&&!0===r.modal?u=!0:"ajax"===e&&"modal"in t&&!0===t.modal&&(u=!0),!0===u){l.addClass("event-clickable");var c=function(a,e,t,n){var r=$('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'),o=$('<h4 class="modal-title" id="'+a+'_modal_title">'+e+"</h4>"),l=$('<div class="modal-header"></div>');l.append(r),l.append(o);var s=$('<div class="modal-body" id="'+a+'_modal_body">'+t+"</div>"),d=$('<div class="modal-footer" id="'+a+'_modal_footer"></div>');if(void 0!==n){var i=$("<div>"+n+"</div>");d.append(i)}var u=$('<div class="modal-content"></div>');u.append(l),u.append(s),u.append(d);var c=$('<div class="modal-dialog"></div>');c.append(u);var b=$('<div class="modal fade" id="'+a+'_modal" tabindex="-1" role="dialog" aria-labelledby="'+a+'_modal_title" aria-hidden="true"></div>');return b.append(c),b.data("dateId",a),b.attr("dateId",a),b}(o,r.title,r.body,r.footer);$("body").append(c),$("#"+o).click(function(){$("#"+o+"_modal").modal()})}}})}function o(a,e,t){var n=new Date;return new Date(a,e,t).toDateString()==n.toDateString()}function l(a,e,t){var n;return a+"-"+(n=(n=e+1)<10?"0"+n:n)+"-"+(t<10?"0"+t:t)}function s(a,e,t){var n=new Date(a,e,t,0,0,0,0).getDay();return 0==n?n=6:n--,n}function d(a,e){for(var t,n,r,o=28;t=a,r=o+1,(n=e+1)>0&&n<13&&t>0&&t<32768&&r>0&&r<=new Date(t,n,0).getDate();)o++;return o}function i(e,t){!1===e&&(e=0);var n,r=a.data("currDate"),o=a.data("initDate");if(n=12*(o.getFullYear()-r.getFullYear()),n-=r.getMonth()+1,n+=o.getMonth(),!0===t){if(n<parseInt(e)-1)return!0}else if(n>=0-parseInt(e))return!0;return!1}a.attr("id","zabuto_calendar_"+Math.floor(99999*Math.random()).toString(36)),a.data("initYear",e.year),a.data("initMonth",e.month),a.data("monthLabels",e.month_labels),a.data("weekStartsOn",e.weekstartson),a.data("navIcons",e.nav_icon),a.data("dowLabels",e.dow_labels),a.data("showToday",e.today),a.data("showDays",e.show_days),a.data("showPrevious",e.show_previous),a.data("showNext",e.show_next),a.data("cellBorder",e.cell_border),a.data("jsonData",e.data),a.data("ajaxSettings",e.ajax),a.data("legendList",e.legend),a.data("actionFunction",e.action),a.data("actionNavFunction",e.action_nav),function(){var e=parseInt(a.data("initYear")),r=parseInt(a.data("initMonth"))-1,o=new Date(e,r,1,0,0,0,0);a.data("initDate",o);var l=!0===a.data("cellBorder")?" table-bordered":"",s=$('<table class="table'+l+'"></table>');s=t(a,s,o.getFullYear(),o.getMonth());var d=function(a){var e=$('<div class="legend" id="'+a.attr("id")+'_legend"></div>'),t=a.data("legendList");"object"==typeof t&&t.length>0&&$(t).each(function(a,t){if("object"==typeof t&&"type"in t){var n="";switch("label"in t&&(n=t.label),t.type){case"text":if(""!==n){var r="";if("badge"in t){if(void 0===t.classname)var o="badge-event";else var o=t.classname;r='<span class="badge '+o+'">'+t.badge+"</span> "}e.append('<span class="legend-'+t.type+'">'+r+n+"</span>")}break;case"block":if(""!==n&&(n="<span>"+n+"</span>"),void 0===t.classname)var l="event";else var l="event-styled "+t.classname;e.append('<span class="legend-'+t.type+'"><ul class="legend"><li class="'+l+'"></li></ul>'+n+"</span>");break;case"list":if("list"in t&&"object"==typeof t.list&&t.list.length>0){var s=$('<ul class="legend"></ul>');$(t.list).each(function(a,e){s.append('<li class="'+e+'"></li>')}),e.append(s)}break;case"spacer":e.append('<span class="legend-'+t.type+'"> </span>')}}});return e}(a),i=$('<div class="zabuto_calendar"></div>');i.append(s),i.append(d),a.append(i),!1!==a.data("jsonData")&&n(a,o.getFullYear(),o.getMonth())}()}),this},$.fn.zabuto_calendar_defaults=function(){var a=new Date;return{language:!1,year:a.getFullYear(),month:a.getMonth()+1,show_previous:!0,show_next:!0,cell_border:!1,today:!1,show_days:!0,weekstartson:1,nav_icon:!1,data:!1,ajax:!1,legend:!1,action:!1,action_nav:!1}},$.fn.zabuto_calendar_language=function(a){switch(void 0!==a&&!1!==a||(a="en"),a.toLowerCase()){case"ar":return{month_labels:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],dow_labels:["أثنين","ثلاثاء","اربعاء","خميس","جمعه","سبت","أحد"]};case"az":return{month_labels:["Yanvar","Fevral","Mart","Aprel","May","İyun","İyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dow_labels:["B.e","Ç.A","Çərş","C.A","Cümə","Şən","Baz"]};case"ca":return{month_labels:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],dow_labels:["Dl","Dt","Dc","Dj","Dv","Ds","Dg"]};case"cn":return{month_labels:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dow_labels:["星期一","星期二","星期三","星期四","星期五","星期六","星期日"]};case"cs":return{month_labels:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dow_labels:["Po","Út","St","Čt","Pá","So","Ne"]};case"de":return{month_labels:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dow_labels:["Mo","Di","Mi","Do","Fr","Sa","So"]};case"en":return{month_labels:["January","February","March","April","May","June","July","August","September","October","November","December"],dow_labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]};case"he":return{month_labels:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],dow_labels:["ב","ג","ד","ה","ו","ש","א"]};case"es":return{month_labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dow_labels:["Lu","Ma","Mi","Ju","Vi","Sá","Do"]};case"fi":return{month_labels:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dow_labels:["Ma","Ti","Ke","To","Pe","La","Su"]};case"fr":return{month_labels:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dow_labels:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"]};case"hu":return{month_labels:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],dow_labels:["Hé","Ke","Sze","Cs","Pé","Szo","Va"]};case"id":return{month_labels:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dow_labels:["Senin","Selasa","Rabu","Kamis","Jum'at","Sabtu","Minggu"]};case"it":return{month_labels:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dow_labels:["Lun","Mar","Mer","Gio","Ven","Sab","Dom"]};case"jp":return{month_labels:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dow_labels:["月","火","水","木","金","土","日"]};case"kr":return{month_labels:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dow_labels:["월","화","수","목","금","토","일"]};case"nl":return{month_labels:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],dow_labels:["Ma","Di","Wo","Do","Vr","Za","Zo"]};case"no":return{month_labels:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dow_labels:["Ma","Ti","On","To","Fr","Lø","Sø"]};case"pl":return{month_labels:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],dow_labels:["pon.","wt.","śr.","czw.","pt.","sob.","niedz."]};case"pt":return{month_labels:["Janeiro","Fevereiro","Marco","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dow_labels:["S","T","Q","Q","S","S","D"]};case"ru":return{month_labels:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dow_labels:["Пн","Вт","Ср","Чт","Пт","Сб","Вск"]};case"se":return{month_labels:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dow_labels:["Mån","Tis","Ons","Tor","Fre","Lör","Sön"]};case"sk":return{month_labels:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],dow_labels:["Po","Ut","St","Št","Pi","So","Ne"]};case"sr":return{month_labels:["Јануар","Фебруар","Март","Април","Мај","Јун","Јул","Август","Септембар","Октобар","Новембар","Децембар"],dow_labels:["Пон","Уто","Сре","Чет","Пет","Суб","Нед"]};case"tr":return{month_labels:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dow_labels:["Pts","Salı","Çar","Per","Cuma","Cts","Paz"]};case"ua":return{month_labels:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],dow_labels:["Пн","Вт","Ср","Чт","Пт","Сб","Нд"]}}};
